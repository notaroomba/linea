ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"patchouli.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "patchouli/src/patchouli.c"
  20              		.section	.text.patchouli_get_position,"ax",%progbits
  21              		.align	1
  22              		.global	patchouli_get_position
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	patchouli_get_position:
  28              	.LVL0:
  29              	.LFB1108:
   1:patchouli/src/patchouli.c **** /*
   2:patchouli/src/patchouli.c **** * Project Patchouli
   3:patchouli/src/patchouli.c **** * Copyright (C) 2024 Anhang Li (thelithcore@gmail.com)
   4:patchouli/src/patchouli.c **** *
   5:patchouli/src/patchouli.c **** * This program is free software: you can redistribute it and/or modify
   6:patchouli/src/patchouli.c **** * it under the terms of the GNU General Public License as published by
   7:patchouli/src/patchouli.c **** * the Free Software Foundation, either version 3 of the License, or
   8:patchouli/src/patchouli.c **** * (at your option) any later version.
   9:patchouli/src/patchouli.c **** *
  10:patchouli/src/patchouli.c **** * This program is distributed in the hope that it will be useful,
  11:patchouli/src/patchouli.c **** * but WITHOUT ANY WARRANTY; without even the implied warranty of
  12:patchouli/src/patchouli.c **** * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  13:patchouli/src/patchouli.c **** * GNU General Public License for more details.
  14:patchouli/src/patchouli.c **** *
  15:patchouli/src/patchouli.c **** * You should have received a copy of the GNU General Public License
  16:patchouli/src/patchouli.c **** * along with this program.  If not, see <http://www.gnu.org/licenses/>.
  17:patchouli/src/patchouli.c **** */
  18:patchouli/src/patchouli.c **** 
  19:patchouli/src/patchouli.c **** #include "patchouli_config.h"
  20:patchouli/src/patchouli.c **** 
  21:patchouli/src/patchouli.c **** #if defined(PATCHOULI_PCB_DISCRETE_SST)
  22:patchouli/src/patchouli.c ****   #include "patchouli_bsp_discrete_sst.h"
  23:patchouli/src/patchouli.c **** #elif defined(PATCHOULI_PCB_GLIDER_ADDON_V1)
  24:patchouli/src/patchouli.c ****   #include "patchouli_bsp_glider_addon_v1.h"
  25:patchouli/src/patchouli.c **** #endif
  26:patchouli/src/patchouli.c **** 
  27:patchouli/src/patchouli.c **** #include "patchouli.h"
  28:patchouli/src/patchouli.c **** #include "patchouli_math.h"
  29:patchouli/src/patchouli.c **** #include <math.h>
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 2


  30:patchouli/src/patchouli.c **** #include <stdint.h>
  31:patchouli/src/patchouli.c **** #include <stdbool.h>
  32:patchouli/src/patchouli.c **** #include <stdarg.h>
  33:patchouli/src/patchouli.c **** #include <stdio.h>
  34:patchouli/src/patchouli.c **** #include "usbd_cdc_if.h"
  35:patchouli/src/patchouli.c **** // #include "usbd_cdc_acms.h"
  36:patchouli/src/patchouli.c **** 
  37:patchouli/src/patchouli.c **** // #define OLD_IMPL
  38:patchouli/src/patchouli.c **** 
  39:patchouli/src/patchouli.c **** // Moving Average Filters
  40:patchouli/src/patchouli.c **** patchouli_mva_t mva_xpos;	// X Position
  41:patchouli/src/patchouli.c **** patchouli_mva_t mva_ypos;	// Y Position
  42:patchouli/src/patchouli.c **** patchouli_mva_t mva_p;		// Tip Pressure
  43:patchouli/src/patchouli.c **** 
  44:patchouli/src/patchouli.c **** patchouli_debug_t debug_state = PATCHOULI_DEBUG_NONE;
  45:patchouli/src/patchouli.c **** float    pavg;
  46:patchouli/src/patchouli.c **** int      maxpptr = 7;
  47:patchouli/src/patchouli.c **** uint16_t psamples[PATCHOULI_TIM_N_STEP];
  48:patchouli/src/patchouli.c **** bool     pen_present = false;
  49:patchouli/src/patchouli.c **** float    pen_zero_pressure = 0;
  50:patchouli/src/patchouli.c **** 
  51:patchouli/src/patchouli.c **** patchouli_position_t xpos, ypos;
  52:patchouli/src/patchouli.c **** 
  53:patchouli/src/patchouli.c **** patchouli_position_t patchouli_get_position(uint8_t fstep, int lastpos, bool x_yn){
  30              		.loc 1 53 83 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 56
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 53 83 is_stmt 0 view .LVU1
  35 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  36              		.cfi_def_cfa_offset 24
  37              		.cfi_offset 4, -24
  38              		.cfi_offset 5, -20
  39              		.cfi_offset 6, -16
  40              		.cfi_offset 7, -12
  41              		.cfi_offset 8, -8
  42              		.cfi_offset 14, -4
  43 0004 8EB0     		sub	sp, sp, #56
  44              		.cfi_def_cfa_offset 80
  45 0006 8046     		mov	r8, r0
  46 0008 0F46     		mov	r7, r1
  47 000a 1546     		mov	r5, r2
  54:patchouli/src/patchouli.c ****     float smem[PATCHOULI_GWIN];
  48              		.loc 1 54 5 is_stmt 1 view .LVU2
  55:patchouli/src/patchouli.c ****     const int window_size = PATCHOULI_GWIN;
  49              		.loc 1 55 5 view .LVU3
  50              	.LVL1:
  56:patchouli/src/patchouli.c ****     const int window_half = window_size/2;
  51              		.loc 1 56 5 view .LVU4
  57:patchouli/src/patchouli.c ****     const int n_coils = x_yn ? PATCHOULI_N_X_COIL : PATCHOULI_N_Y_COIL;
  52              		.loc 1 57 5 view .LVU5
  53              		.loc 1 57 51 is_stmt 0 view .LVU6
  54 000c 1E46     		mov	r6, r3
  55 000e 43B1     		cbz	r3, .L7
  56              		.loc 1 57 51 discriminator 1 view .LVU7
  57 0010 1C23     		movs	r3, #28
  58              	.LVL2:
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 3


  59              	.L2:
  58:patchouli/src/patchouli.c ****     if (lastpos<window_half)           lastpos =         window_half  ;
  60              		.loc 1 58 5 is_stmt 1 view .LVU8
  61              		.loc 1 58 8 is_stmt 0 view .LVU9
  62 0012 012D     		cmp	r5, #1
  63 0014 07DD     		ble	.L10
  64              	.L3:
  65              	.LVL3:
  59:patchouli/src/patchouli.c ****     if (lastpos>n_coils-window_half-1) lastpos = n_coils-window_half-1;
  66              		.loc 1 59 5 is_stmt 1 view .LVU10
  67              		.loc 1 59 16 is_stmt 0 view .LVU11
  68 0016 9A1E     		subs	r2, r3, #2
  69              		.loc 1 59 8 view .LVU12
  70 0018 AA42     		cmp	r2, r5
  71 001a 00DC     		bgt	.L4
  72              		.loc 1 59 40 is_stmt 1 discriminator 1 view .LVU13
  73              		.loc 1 59 48 is_stmt 0 discriminator 1 view .LVU14
  74 001c DD1E     		subs	r5, r3, #3
  75              	.LVL4:
  76              	.L4:
  60:patchouli/src/patchouli.c **** 
  61:patchouli/src/patchouli.c ****     for (int i=0; i<window_size; i++){
  77              		.loc 1 61 5 is_stmt 1 view .LVU15
  78              	.LBB2:
  79              		.loc 1 61 10 view .LVU16
  80              		.loc 1 61 14 is_stmt 0 view .LVU17
  81 001e 0024     		movs	r4, #0
  82              		.loc 1 61 5 view .LVU18
  83 0020 1BE0     		b	.L5
  84              	.LVL5:
  85              	.L7:
  86              		.loc 1 61 5 view .LVU19
  87              	.LBE2:
  57:patchouli/src/patchouli.c ****     if (lastpos<window_half)           lastpos =         window_half  ;
  88              		.loc 1 57 51 discriminator 2 view .LVU20
  89 0022 1223     		movs	r3, #18
  90              	.LVL6:
  57:patchouli/src/patchouli.c ****     if (lastpos<window_half)           lastpos =         window_half  ;
  91              		.loc 1 57 51 discriminator 2 view .LVU21
  92 0024 F5E7     		b	.L2
  93              	.LVL7:
  94              	.L10:
  58:patchouli/src/patchouli.c ****     if (lastpos>n_coils-window_half-1) lastpos = n_coils-window_half-1;
  95              		.loc 1 58 48 discriminator 1 view .LVU22
  96 0026 0225     		movs	r5, #2
  97 0028 F5E7     		b	.L3
  98              	.LVL8:
  99              	.L6:
 100              	.LBB3:
  62:patchouli/src/patchouli.c ****         patchouli_coil_select(lastpos-window_half+i,x_yn);
 101              		.loc 1 62 9 is_stmt 1 view .LVU23
 102              		.loc 1 62 38 is_stmt 0 view .LVU24
 103 002a A81E     		subs	r0, r5, #2
 104              		.loc 1 62 9 view .LVU25
 105 002c 3146     		mov	r1, r6
 106 002e 2044     		add	r0, r0, r4
 107 0030 FFF7FEFF 		bl	patchouli_coil_select
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 4


 108              	.LVL9:
  63:patchouli/src/patchouli.c ****         smem[i] = (float)patchouli_simple_take_sample(!x_yn, fstep) - PATCHOULI_DATA_OFFSET;
 109              		.loc 1 63 9 is_stmt 1 view .LVU26
 110              		.loc 1 63 26 is_stmt 0 view .LVU27
 111 0034 3946     		mov	r1, r7
 112 0036 86F00100 		eor	r0, r6, #1
 113 003a FFF7FEFF 		bl	patchouli_simple_take_sample
 114              	.LVL10:
 115 003e 07EE900A 		vmov	s15, r0	@ int
 116              		.loc 1 63 19 discriminator 1 view .LVU28
 117 0042 F8EE677A 		vcvt.f32.u32	s15, s15
 118              		.loc 1 63 69 discriminator 1 view .LVU29
 119 0046 9FED197A 		vldr.32	s14, .L11
 120 004a 77EEC77A 		vsub.f32	s15, s15, s14
 121              		.loc 1 63 17 discriminator 1 view .LVU30
 122 004e 0EAB     		add	r3, sp, #56
 123 0050 03EB8403 		add	r3, r3, r4, lsl #2
 124 0054 43ED057A 		vstr.32	s15, [r3, #-20]
  61:patchouli/src/patchouli.c ****         patchouli_coil_select(lastpos-window_half+i,x_yn);
 125              		.loc 1 61 35 is_stmt 1 discriminator 3 view .LVU31
 126 0058 0134     		adds	r4, r4, #1
 127              	.LVL11:
 128              	.L5:
  61:patchouli/src/patchouli.c ****         patchouli_coil_select(lastpos-window_half+i,x_yn);
 129              		.loc 1 61 20 discriminator 1 view .LVU32
 130 005a 042C     		cmp	r4, #4
 131 005c E5DD     		ble	.L6
 132              	.LBE3:
  64:patchouli/src/patchouli.c ****     }
  65:patchouli/src/patchouli.c ****     patchouli_quad_interp_t interp = {
 133              		.loc 1 65 5 view .LVU33
 134              		.loc 1 65 29 is_stmt 0 view .LVU34
 135 005e 2022     		movs	r2, #32
 136 0060 0021     		movs	r1, #0
 137 0062 01A8     		add	r0, sp, #4
 138 0064 FFF7FEFF 		bl	memset
 139              	.LVL12:
 140 0068 0523     		movs	r3, #5
 141 006a 8DF80430 		strb	r3, [sp, #4]
 142 006e 4FF08143 		mov	r3, #1082130432
 143 0072 0393     		str	r3, [sp, #12]	@ float
 144 0074 09AB     		add	r3, sp, #36
 145 0076 0493     		str	r3, [sp, #16]
  66:patchouli/src/patchouli.c ****         .n = PATCHOULI_GWIN,
  67:patchouli/src/patchouli.c ****         .low = 0,
  68:patchouli/src/patchouli.c ****         .high = PATCHOULI_GWIN-1,
  69:patchouli/src/patchouli.c ****         .data = smem,
  70:patchouli/src/patchouli.c ****     };
  71:patchouli/src/patchouli.c ****     float posavg = patchouli_quad_interp(&interp) + lastpos - window_half;
 146              		.loc 1 71 5 is_stmt 1 view .LVU35
 147              		.loc 1 71 20 is_stmt 0 view .LVU36
 148 0078 01A8     		add	r0, sp, #4
 149 007a FFF7FEFF 		bl	patchouli_quad_interp
 150              	.LVL13:
 151              		.loc 1 71 51 discriminator 1 view .LVU37
 152 007e 07EE905A 		vmov	s15, r5	@ int
 153 0082 F8EEE77A 		vcvt.f32.s32	s15, s15
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 5


 154 0086 77EE807A 		vadd.f32	s15, s15, s0
 155              		.loc 1 71 11 discriminator 1 view .LVU38
 156 008a B0EE007A 		vmov.f32	s14, #2.0e+0
 157 008e 77EEC77A 		vsub.f32	s15, s15, s14
 158              	.LVL14:
  72:patchouli/src/patchouli.c ****     // CDC_Transmit_FS((uint8_t*)"Posavg:\n", 8);
  73:patchouli/src/patchouli.c ****     // char buf[17];
  74:patchouli/src/patchouli.c ****     // buf[0] = 'a';
  75:patchouli/src/patchouli.c ****     // sprintf(buf, "%f\n", posavg);
  76:patchouli/src/patchouli.c ****     // CDC_Transmit_FS((uint8_t*)buf, strlen(buf));    
  77:patchouli/src/patchouli.c ****     patchouli_position_t ret = {
 159              		.loc 1 77 5 is_stmt 1 view .LVU39
  78:patchouli/src/patchouli.c ****         .idx = interp.result_maxidx + lastpos - window_half,
 160              		.loc 1 78 22 is_stmt 0 view .LVU40
 161 0092 059B     		ldr	r3, [sp, #20]
 162              		.loc 1 78 37 view .LVU41
 163 0094 2B44     		add	r3, r3, r5
 164              		.loc 1 78 47 view .LVU42
 165 0096 023B     		subs	r3, r3, #2
  77:patchouli/src/patchouli.c ****         .idx = interp.result_maxidx + lastpos - window_half,
 166              		.loc 1 77 26 view .LVU43
 167 0098 C8F80030 		str	r3, [r8]
 168 009c C8ED017A 		vstr.32	s15, [r8, #4]
 169 00a0 88F80860 		strb	r6, [r8, #8]
  79:patchouli/src/patchouli.c ****         .val = posavg,
  80:patchouli/src/patchouli.c ****         .x_yn = x_yn,
  81:patchouli/src/patchouli.c ****     };
  82:patchouli/src/patchouli.c ****     return ret;
 170              		.loc 1 82 5 is_stmt 1 view .LVU44
  83:patchouli/src/patchouli.c **** }
 171              		.loc 1 83 1 is_stmt 0 view .LVU45
 172 00a4 4046     		mov	r0, r8
 173 00a6 0EB0     		add	sp, sp, #56
 174              		.cfi_def_cfa_offset 24
 175              		@ sp needed
 176 00a8 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 177              	.LVL15:
 178              	.L12:
 179              		.loc 1 83 1 view .LVU46
 180              		.align	2
 181              	.L11:
 182 00ac 0000C842 		.word	1120403456
 183              		.cfi_endproc
 184              	.LFE1108:
 186              		.section	.text.patchouli_init,"ax",%progbits
 187              		.align	1
 188              		.global	patchouli_init
 189              		.syntax unified
 190              		.thumb
 191              		.thumb_func
 193              	patchouli_init:
 194              	.LFB1109:
  84:patchouli/src/patchouli.c **** 
  85:patchouli/src/patchouli.c **** void patchouli_init(){
 195              		.loc 1 85 22 is_stmt 1 view -0
 196              		.cfi_startproc
 197              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 6


 198              		@ frame_needed = 0, uses_anonymous_args = 0
 199 0000 08B5     		push	{r3, lr}
 200              		.cfi_def_cfa_offset 8
 201              		.cfi_offset 3, -8
 202              		.cfi_offset 14, -4
  86:patchouli/src/patchouli.c **** 	  patchouli_coil_select(0,1);
 203              		.loc 1 86 4 view .LVU48
 204 0002 0121     		movs	r1, #1
 205 0004 0020     		movs	r0, #0
 206 0006 FFF7FEFF 		bl	patchouli_coil_select
 207              	.LVL16:
  87:patchouli/src/patchouli.c **** 	  patchouli_TIM_init();
 208              		.loc 1 87 4 view .LVU49
 209 000a FFF7FEFF 		bl	patchouli_TIM_init
 210              	.LVL17:
  88:patchouli/src/patchouli.c **** 	  patchouli_gauss_init_kernel();
 211              		.loc 1 88 4 view .LVU50
 212 000e FFF7FEFF 		bl	patchouli_gauss_init_kernel
 213              	.LVL18:
  89:patchouli/src/patchouli.c **** 	  patchouli_mva_buffer_init(&mva_p,3);
 214              		.loc 1 89 4 view .LVU51
 215 0012 0321     		movs	r1, #3
 216 0014 0148     		ldr	r0, .L15
 217 0016 FFF7FEFF 		bl	patchouli_mva_buffer_init
 218              	.LVL19:
  90:patchouli/src/patchouli.c **** }
 219              		.loc 1 90 1 is_stmt 0 view .LVU52
 220 001a 08BD     		pop	{r3, pc}
 221              	.L16:
 222              		.align	2
 223              	.L15:
 224 001c 00000000 		.word	mva_p
 225              		.cfi_endproc
 226              	.LFE1109:
 228              		.section	.rodata._patchouli_cycle_default.str1.4,"aMS",%progbits,1
 229              		.align	2
 230              	.LC0:
 231 0000 47617573 		.ascii	"Gauss Fit PDET\012\000"
 231      73204669 
 231      74205044 
 231      45540A00 
 232              		.global	__aeabi_f2d
 233              		.global	__aeabi_d2f
 234              		.global	__aeabi_d2iz
 235              		.section	.text._patchouli_cycle_default,"ax",%progbits
 236              		.align	1
 237              		.global	_patchouli_cycle_default
 238              		.syntax unified
 239              		.thumb
 240              		.thumb_func
 242              	_patchouli_cycle_default:
 243              	.LFB1110:
  91:patchouli/src/patchouli.c **** 
  92:patchouli/src/patchouli.c **** // Default Running Mode
  93:patchouli/src/patchouli.c **** void _patchouli_cycle_default(){
 244              		.loc 1 93 32 is_stmt 1 view -0
 245              		.cfi_startproc
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 7


 246              		@ args = 0, pretend = 0, frame = 48
 247              		@ frame_needed = 0, uses_anonymous_args = 0
 248 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 249              		.cfi_def_cfa_offset 20
 250              		.cfi_offset 4, -20
 251              		.cfi_offset 5, -16
 252              		.cfi_offset 6, -12
 253              		.cfi_offset 7, -8
 254              		.cfi_offset 14, -4
 255 0002 2DED048B 		vpush.64	{d8, d9}
 256              		.cfi_def_cfa_offset 36
 257              		.cfi_offset 80, -36
 258              		.cfi_offset 81, -32
 259              		.cfi_offset 82, -28
 260              		.cfi_offset 83, -24
 261 0006 8DB0     		sub	sp, sp, #52
 262              		.cfi_def_cfa_offset 88
  94:patchouli/src/patchouli.c ****     // Scan X-Y Position
  95:patchouli/src/patchouli.c ****     xpos = patchouli_get_position(maxpptr, xpos.idx, true );
 263              		.loc 1 95 5 view .LVU54
 264              		.loc 1 95 12 is_stmt 0 view .LVU55
 265 0008 724E     		ldr	r6, .L32
 266 000a 6C46     		mov	r4, sp
 267 000c 724F     		ldr	r7, .L32+4
 268 000e 0123     		movs	r3, #1
 269 0010 3268     		ldr	r2, [r6]
 270 0012 3978     		ldrb	r1, [r7]	@ zero_extendqisi2
 271 0014 2046     		mov	r0, r4
 272 0016 FFF7FEFF 		bl	patchouli_get_position
 273              	.LVL20:
 274 001a 94E80700 		ldm	r4, {r0, r1, r2}
 275 001e 86E80700 		stm	r6, {r0, r1, r2}
  96:patchouli/src/patchouli.c ****     ypos = patchouli_get_position(maxpptr, ypos.idx, false);
 276              		.loc 1 96 5 is_stmt 1 view .LVU56
 277              		.loc 1 96 12 is_stmt 0 view .LVU57
 278 0022 6E4D     		ldr	r5, .L32+8
 279 0024 0023     		movs	r3, #0
 280 0026 2A68     		ldr	r2, [r5]
 281 0028 3978     		ldrb	r1, [r7]	@ zero_extendqisi2
 282 002a 2046     		mov	r0, r4
 283 002c FFF7FEFF 		bl	patchouli_get_position
 284              	.LVL21:
 285 0030 94E80700 		ldm	r4, {r0, r1, r2}
 286 0034 85E80700 		stm	r5, {r0, r1, r2}
  97:patchouli/src/patchouli.c ****     // CDC_Transmit_FS((uint8_t*)"X-Y Position\n", 13);
  98:patchouli/src/patchouli.c ****     float xavg = xpos.val;
 287              		.loc 1 98 5 is_stmt 1 view .LVU58
 288              		.loc 1 98 11 is_stmt 0 view .LVU59
 289 0038 D6ED018A 		vldr.32	s17, [r6, #4]
 290              	.LVL22:
  99:patchouli/src/patchouli.c ****     float yavg = ypos.val;
 291              		.loc 1 99 5 is_stmt 1 view .LVU60
 292              		.loc 1 99 11 is_stmt 0 view .LVU61
 293 003c 95ED018A 		vldr.32	s16, [r5, #4]
 294              	.LVL23:
 100:patchouli/src/patchouli.c ****     
 101:patchouli/src/patchouli.c ****     // char buf[17]; // Buffer for string conversion
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 8


 102:patchouli/src/patchouli.c **** 
 103:patchouli/src/patchouli.c **** 	// Scan Frequency to find the peak
 104:patchouli/src/patchouli.c **** 	uint16_t maxpval = 0;
 295              		.loc 1 104 2 is_stmt 1 view .LVU62
 105:patchouli/src/patchouli.c **** 	for (int fstep=0;fstep<8;fstep++){
 296              		.loc 1 105 2 view .LVU63
 297              	.LBB4:
 298              		.loc 1 105 7 view .LVU64
 299              		.loc 1 105 11 is_stmt 0 view .LVU65
 300 0040 0024     		movs	r4, #0
 301              	.LBE4:
 104:patchouli/src/patchouli.c **** 	for (int fstep=0;fstep<8;fstep++){
 302              		.loc 1 104 11 view .LVU66
 303 0042 2546     		mov	r5, r4
 304              	.LBB5:
 305              		.loc 1 105 2 view .LVU67
 306 0044 00E0     		b	.L18
 307              	.LVL24:
 308              	.L19:
 309              		.loc 1 105 32 is_stmt 1 discriminator 2 view .LVU68
 310 0046 0134     		adds	r4, r4, #1
 311              	.LVL25:
 312              	.L18:
 313              		.loc 1 105 24 discriminator 1 view .LVU69
 314 0048 072C     		cmp	r4, #7
 315 004a 11DC     		bgt	.L30
 106:patchouli/src/patchouli.c **** 		patchouli_coil_select(xpos.idx, 1);
 316              		.loc 1 106 3 view .LVU70
 317 004c 0121     		movs	r1, #1
 318 004e 614B     		ldr	r3, .L32
 319 0050 1868     		ldr	r0, [r3]
 320 0052 FFF7FEFF 		bl	patchouli_coil_select
 321              	.LVL26:
 107:patchouli/src/patchouli.c **** 		psamples[fstep] = patchouli_simple_take_sample(false, fstep);
 322              		.loc 1 107 3 view .LVU71
 323              		.loc 1 107 21 is_stmt 0 view .LVU72
 324 0056 E1B2     		uxtb	r1, r4
 325 0058 0020     		movs	r0, #0
 326 005a FFF7FEFF 		bl	patchouli_simple_take_sample
 327              	.LVL27:
 328              		.loc 1 107 19 discriminator 1 view .LVU73
 329 005e 604B     		ldr	r3, .L32+12
 330 0060 23F81400 		strh	r0, [r3, r4, lsl #1]	@ movhi
 108:patchouli/src/patchouli.c **** 		if(psamples[fstep]>maxpval){
 331              		.loc 1 108 3 is_stmt 1 view .LVU74
 332              		.loc 1 108 5 is_stmt 0 view .LVU75
 333 0064 A842     		cmp	r0, r5
 334 0066 EED9     		bls	.L19
 109:patchouli/src/patchouli.c ****             maxpval = psamples[fstep];
 335              		.loc 1 109 13 is_stmt 1 view .LVU76
 336              	.LVL28:
 110:patchouli/src/patchouli.c ****             maxpptr = fstep;
 337              		.loc 1 110 13 view .LVU77
 338              		.loc 1 110 21 is_stmt 0 view .LVU78
 339 0068 5B4B     		ldr	r3, .L32+4
 340 006a 1C60     		str	r4, [r3]
 109:patchouli/src/patchouli.c ****             maxpval = psamples[fstep];
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 9


 341              		.loc 1 109 21 view .LVU79
 342 006c 0546     		mov	r5, r0
 343 006e EAE7     		b	.L19
 344              	.LVL29:
 345              	.L30:
 109:patchouli/src/patchouli.c ****             maxpval = psamples[fstep];
 346              		.loc 1 109 21 view .LVU80
 347              	.LBE5:
 111:patchouli/src/patchouli.c ****         }
 112:patchouli/src/patchouli.c **** 	}
 113:patchouli/src/patchouli.c ****     // CDC_Transmit_FS((uint8_t*)"Max Pressure\n", 13);
 114:patchouli/src/patchouli.c **** 
 115:patchouli/src/patchouli.c ****     // CDC_Transmit_FS((uint8_t*)"Max Pressure Value:\n", 20);
 116:patchouli/src/patchouli.c ****     // sprintf(buf, "%d\n", maxpval);
 117:patchouli/src/patchouli.c ****     // uint8_t res = CDC_Transmit_FS((uint8_t*)buf, strlen(buf));
 118:patchouli/src/patchouli.c ****     // if(res == 0){
 119:patchouli/src/patchouli.c ****     //     CDC_Transmit_FS((uint8_t*)"Successfully transmitted maxpval\n", 33);
 120:patchouli/src/patchouli.c ****     // } else if(res == 1) {
 121:patchouli/src/patchouli.c ****     //     CDC_Transmit_FS((uint8_t*)"Busy\n", 5);
 122:patchouli/src/patchouli.c ****     // } else {
 123:patchouli/src/patchouli.c ****     //     CDC_Transmit_FS((uint8_t*)"Failed\n", 7);
 124:patchouli/src/patchouli.c ****     // }
 125:patchouli/src/patchouli.c ****     // CDC_Transmit_FS((uint8_t*)"\n", 1);
 126:patchouli/src/patchouli.c **** 	if(maxpval>PATCHOULI_PDET_THRES){
 348              		.loc 1 126 2 is_stmt 1 view .LVU81
 349              		.loc 1 126 4 is_stmt 0 view .LVU82
 350 0070 962D     		cmp	r5, #150
 351 0072 40F2A880 		bls	.L21
 352              	.LBB6:
 127:patchouli/src/patchouli.c **** 		patchouli_led_on();
 353              		.loc 1 127 3 is_stmt 1 view .LVU83
 354 0076 FFF7FEFF 		bl	patchouli_led_on
 355              	.LVL30:
 128:patchouli/src/patchouli.c **** 		// Gauss Fit PDET
 129:patchouli/src/patchouli.c ****         CDC_Transmit_FS((uint8_t*)"Gauss Fit PDET\n", 15);
 356              		.loc 1 129 9 view .LVU84
 357 007a 0F21     		movs	r1, #15
 358 007c 5948     		ldr	r0, .L32+16
 359 007e FFF7FEFF 		bl	CDC_Transmit_FS
 360              	.LVL31:
 130:patchouli/src/patchouli.c **** 		float c1[3];
 361              		.loc 1 130 3 view .LVU85
 131:patchouli/src/patchouli.c **** 		patchouli_gauss_apply((psamples+maxpptr-2), c1);
 362              		.loc 1 131 3 view .LVU86
 363              		.loc 1 131 42 is_stmt 0 view .LVU87
 364 0082 554C     		ldr	r4, .L32+4
 365              	.LVL32:
 366              		.loc 1 131 42 view .LVU88
 367 0084 2368     		ldr	r3, [r4]
 368 0086 03F10043 		add	r3, r3, #-2147483648
 369 008a 023B     		subs	r3, r3, #2
 370              		.loc 1 131 3 view .LVU89
 371 008c 05A9     		add	r1, sp, #20
 372 008e 5448     		ldr	r0, .L32+12
 373 0090 00EB4300 		add	r0, r0, r3, lsl #1
 374 0094 FFF7FEFF 		bl	patchouli_gauss_apply
 375              	.LVL33:
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 10


 132:patchouli/src/patchouli.c **** 		float t = exp(11-(maxpptr-c1[1]/(2*c1[2])));
 376              		.loc 1 132 3 is_stmt 1 view .LVU90
 377              		.loc 1 132 40 is_stmt 0 view .LVU91
 378 0098 DDED077A 		vldr.32	s15, [sp, #28]
 379              		.loc 1 132 37 view .LVU92
 380 009c 77EEA77A 		vadd.f32	s15, s15, s15
 381              		.loc 1 132 34 view .LVU93
 382 00a0 DDED066A 		vldr.32	s13, [sp, #24]
 383 00a4 86EEA77A 		vdiv.f32	s14, s13, s15
 384              		.loc 1 132 28 view .LVU94
 385 00a8 D4ED007A 		vldr.32	s15, [r4]	@ int
 386 00ac F8EEE77A 		vcvt.f32.s32	s15, s15
 387 00b0 77EEC77A 		vsub.f32	s15, s15, s14
 388              		.loc 1 132 13 view .LVU95
 389 00b4 B2EE067A 		vmov.f32	s14, #1.1e+1
 390 00b8 77EE677A 		vsub.f32	s15, s14, s15
 391 00bc 17EE900A 		vmov	r0, s15
 392 00c0 FFF7FEFF 		bl	__aeabi_f2d
 393              	.LVL34:
 394 00c4 41EC100B 		vmov	d0, r0, r1
 395 00c8 FFF7FEFF 		bl	exp
 396              	.LVL35:
 397 00cc 51EC100B 		vmov	r0, r1, d0
 398              		.loc 1 132 9 discriminator 1 view .LVU96
 399 00d0 FFF7FEFF 		bl	__aeabi_d2f
 400              	.LVL36:
 401 00d4 00EE100A 		vmov	s0, r0
 402              	.LVL37:
 133:patchouli/src/patchouli.c **** 		if(t<2000) pavg = patchouli_mva_buffer_push(&mva_p, t);
 403              		.loc 1 133 3 is_stmt 1 view .LVU97
 404              		.loc 1 133 5 is_stmt 0 view .LVU98
 405 00d8 DFED437A 		vldr.32	s15, .L32+20
 406 00dc B4EEE70A 		vcmpe.f32	s0, s15
 407 00e0 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 408 00e4 68D4     		bmi	.L31
 409              	.LVL38:
 410              	.L22:
 134:patchouli/src/patchouli.c **** 
 135:patchouli/src/patchouli.c ****         // Auto-zeroing
 136:patchouli/src/patchouli.c ****         if (!pen_present) {
 411              		.loc 1 136 9 is_stmt 1 view .LVU99
 412              		.loc 1 136 13 is_stmt 0 view .LVU100
 413 00e6 414B     		ldr	r3, .L32+24
 414 00e8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 415              		.loc 1 136 12 view .LVU101
 416 00ea 33B9     		cbnz	r3, .L24
 137:patchouli/src/patchouli.c ****             pen_present       = true;
 417              		.loc 1 137 13 is_stmt 1 view .LVU102
 418              		.loc 1 137 31 is_stmt 0 view .LVU103
 419 00ec 3F4B     		ldr	r3, .L32+24
 420 00ee 0122     		movs	r2, #1
 421 00f0 1A70     		strb	r2, [r3]
 138:patchouli/src/patchouli.c ****             pen_zero_pressure = pavg;
 422              		.loc 1 138 13 is_stmt 1 view .LVU104
 423              		.loc 1 138 31 is_stmt 0 view .LVU105
 424 00f2 3F4B     		ldr	r3, .L32+28
 425 00f4 1A68     		ldr	r2, [r3]	@ float
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 11


 426 00f6 3F4B     		ldr	r3, .L32+32
 427 00f8 1A60     		str	r2, [r3]	@ float
 428              	.L24:
 139:patchouli/src/patchouli.c ****         }
 140:patchouli/src/patchouli.c ****         const float x_src_min = 0.5f;
 429              		.loc 1 140 9 is_stmt 1 view .LVU106
 430              	.LVL39:
 141:patchouli/src/patchouli.c ****         const float x_src_max = 10.5f;
 431              		.loc 1 141 9 view .LVU107
 142:patchouli/src/patchouli.c ****         const float y_src_min = 0.5f;
 432              		.loc 1 142 9 view .LVU108
 143:patchouli/src/patchouli.c ****         const float y_src_max = 7.5f;
 433              		.loc 1 143 9 view .LVU109
 144:patchouli/src/patchouli.c **** 
 145:patchouli/src/patchouli.c ****         const float x_dst_min = 0.0f;
 434              		.loc 1 145 9 view .LVU110
 146:patchouli/src/patchouli.c ****         const float x_dst_max = 32000.0f;
 435              		.loc 1 146 9 view .LVU111
 147:patchouli/src/patchouli.c ****         const float y_dst_min = 20000.0f;
 436              		.loc 1 147 9 view .LVU112
 148:patchouli/src/patchouli.c ****         const float y_dst_max = 0.0f;
 437              		.loc 1 148 9 view .LVU113
 149:patchouli/src/patchouli.c **** 
 150:patchouli/src/patchouli.c ****         int x = (int)round(patchouli_linear_map(x_src_min, x_src_max, x_dst_min, x_dst_max, xavg));
 438              		.loc 1 150 9 view .LVU114
 439              		.loc 1 150 28 is_stmt 0 view .LVU115
 440 00fa 9FED3F9A 		vldr.32	s18, .L32+36
 441 00fe B0EE682A 		vmov.f32	s4, s17
 442 0102 DFED3E1A 		vldr.32	s3, .L32+40
 443 0106 B0EE491A 		vmov.f32	s2, s18
 444 010a F2EE050A 		vmov.f32	s1, #1.05e+1
 445 010e B6EE000A 		vmov.f32	s0, #5.0e-1
 446 0112 FFF7FEFF 		bl	patchouli_linear_map
 447              	.LVL40:
 448 0116 10EE100A 		vmov	r0, s0
 449              		.loc 1 150 22 discriminator 1 view .LVU116
 450 011a FFF7FEFF 		bl	__aeabi_f2d
 451              	.LVL41:
 452 011e 41EC100B 		vmov	d0, r0, r1
 453 0122 FFF7FEFF 		bl	round
 454              	.LVL42:
 455 0126 51EC100B 		vmov	r0, r1, d0
 456              		.loc 1 150 13 discriminator 2 view .LVU117
 457 012a FFF7FEFF 		bl	__aeabi_d2iz
 458              	.LVL43:
 459 012e 0446     		mov	r4, r0
 460              	.LVL44:
 151:patchouli/src/patchouli.c ****         int y = (int)round(patchouli_linear_map(y_src_min, y_src_max, y_dst_min, y_dst_max, yavg));
 461              		.loc 1 151 9 is_stmt 1 view .LVU118
 462              		.loc 1 151 28 is_stmt 0 view .LVU119
 463 0130 B0EE482A 		vmov.f32	s4, s16
 464 0134 F0EE491A 		vmov.f32	s3, s18
 465 0138 9FED311A 		vldr.32	s2, .L32+44
 466 013c F1EE0E0A 		vmov.f32	s1, #7.5e+0
 467 0140 B6EE000A 		vmov.f32	s0, #5.0e-1
 468 0144 FFF7FEFF 		bl	patchouli_linear_map
 469              	.LVL45:
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 12


 470              		.loc 1 151 28 view .LVU120
 471 0148 10EE100A 		vmov	r0, s0
 472              		.loc 1 151 22 discriminator 1 view .LVU121
 473 014c FFF7FEFF 		bl	__aeabi_f2d
 474              	.LVL46:
 475 0150 41EC100B 		vmov	d0, r0, r1
 476 0154 FFF7FEFF 		bl	round
 477              	.LVL47:
 478 0158 51EC100B 		vmov	r0, r1, d0
 479              		.loc 1 151 13 discriminator 2 view .LVU122
 480 015c FFF7FEFF 		bl	__aeabi_d2iz
 481              	.LVL48:
 152:patchouli/src/patchouli.c **** 
 153:patchouli/src/patchouli.c ****         // Print the mapped coordinates
 154:patchouli/src/patchouli.c ****         // CDC_Transmit_FS((uint8_t*)"X:", 2);
 155:patchouli/src/patchouli.c ****         // sprintf(buf, "%d\n", x);
 156:patchouli/src/patchouli.c ****         // CDC_Transmit_FS((uint8_t*)buf, strlen(buf));
 157:patchouli/src/patchouli.c ****         // CDC_Transmit_FS((uint8_t*)"Y:", 2);
 158:patchouli/src/patchouli.c ****         // sprintf(buf, "%d\n", y);
 159:patchouli/src/patchouli.c ****         // CDC_Transmit_FS((uint8_t*)buf, strlen(buf));
 160:patchouli/src/patchouli.c **** 
 161:patchouli/src/patchouli.c ****         const float pmax = 28.8f;
 482              		.loc 1 161 9 is_stmt 1 view .LVU123
 162:patchouli/src/patchouli.c ****         const float pmin = 970.0f;
 483              		.loc 1 162 9 view .LVU124
 163:patchouli/src/patchouli.c ****         const float prange = pmax-pmin;
 484              		.loc 1 163 9 view .LVU125
 164:patchouli/src/patchouli.c **** 
 165:patchouli/src/patchouli.c ****         int p = (int)(4096*(((pavg-pen_zero_pressure)/prange)*((pavg-pen_zero_pressure)/prange))); 
 485              		.loc 1 165 9 view .LVU126
 486              		.loc 1 165 35 is_stmt 0 view .LVU127
 487 0160 234B     		ldr	r3, .L32+28
 488 0162 93ED007A 		vldr.32	s14, [r3]
 489 0166 234B     		ldr	r3, .L32+32
 490 0168 D3ED007A 		vldr.32	s15, [r3]
 491 016c 37EE677A 		vsub.f32	s14, s14, s15
 492              		.loc 1 165 54 view .LVU128
 493 0170 DFED246A 		vldr.32	s13, .L32+48
 494 0174 C7EE267A 		vdiv.f32	s15, s14, s13
 495              		.loc 1 165 62 view .LVU129
 496 0178 67EEA77A 		vmul.f32	s15, s15, s15
 497              		.loc 1 165 13 view .LVU130
 498 017c B0EE677A 		vmov.f32	s14, s15
 499 0180 BEEECA7A 		vcvt.s32.f32	s14, s14, #12
 500 0184 17EE103A 		vmov	r3, s14	@ int
 501              	.LVL49:
 166:patchouli/src/patchouli.c ****         if (p>4095) p = 4095;
 502              		.loc 1 166 9 is_stmt 1 view .LVU131
 503              		.loc 1 166 12 is_stmt 0 view .LVU132
 504 0188 B3F5805F 		cmp	r3, #4096
 505 018c 01DB     		blt	.L25
 506              		.loc 1 166 23 discriminator 1 view .LVU133
 507 018e 40F6FF73 		movw	r3, #4095
 508              	.LVL50:
 509              	.L25:
 167:patchouli/src/patchouli.c ****         PATCHOULI_UsrLog("$%d, %d, %d, %d, %d;\r\n", (int)(xavg*1000), (int)(yavg*1000),(int)(pavg*
 510              		.loc 1 167 118 is_stmt 1 view .LVU134
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 13


 168:patchouli/src/patchouli.c **** 		patchouli_report_t report = {0};
 511              		.loc 1 168 3 view .LVU135
 512              		.loc 1 168 22 is_stmt 0 view .LVU136
 513 0192 0022     		movs	r2, #0
 514 0194 0892     		str	r2, [sp, #32]
 515 0196 0992     		str	r2, [sp, #36]
 516 0198 0A92     		str	r2, [sp, #40]
 517 019a 0B92     		str	r2, [sp, #44]
 169:patchouli/src/patchouli.c **** 		report.xpos = x;
 518              		.loc 1 169 3 is_stmt 1 view .LVU137
 519              		.loc 1 169 15 is_stmt 0 view .LVU138
 520 019c ADF82040 		strh	r4, [sp, #32]	@ movhi
 170:patchouli/src/patchouli.c **** 		report.ypos = y;
 521              		.loc 1 170 3 is_stmt 1 view .LVU139
 522              		.loc 1 170 15 is_stmt 0 view .LVU140
 523 01a0 ADF82200 		strh	r0, [sp, #34]	@ movhi
 171:patchouli/src/patchouli.c **** 		report.tip  = p*4;
 524              		.loc 1 171 3 is_stmt 1 view .LVU141
 525              		.loc 1 171 15 is_stmt 0 view .LVU142
 526 01a4 9B00     		lsls	r3, r3, #2
 527              	.LVL51:
 528              		.loc 1 171 15 view .LVU143
 529 01a6 ADF82A30 		strh	r3, [sp, #42]	@ movhi
 172:patchouli/src/patchouli.c **** 		patchouli_transmit(&report);
 530              		.loc 1 172 3 is_stmt 1 view .LVU144
 531 01aa 08A8     		add	r0, sp, #32
 532              	.LVL52:
 533              		.loc 1 172 3 is_stmt 0 view .LVU145
 534 01ac FFF7FEFF 		bl	patchouli_transmit
 535              	.LVL53:
 536              	.L17:
 537              		.loc 1 172 3 view .LVU146
 538              	.LBE6:
 173:patchouli/src/patchouli.c **** 	} else {
 174:patchouli/src/patchouli.c ****         // CDC_Transmit_FS((uint8_t*)"Pen not present\n", 17);
 175:patchouli/src/patchouli.c ****         pen_present = false;
 176:patchouli/src/patchouli.c **** 		patchouli_led_off();
 177:patchouli/src/patchouli.c **** 	}
 178:patchouli/src/patchouli.c **** }
 539              		.loc 1 178 1 view .LVU147
 540 01b0 0DB0     		add	sp, sp, #52
 541              		.cfi_remember_state
 542              		.cfi_def_cfa_offset 36
 543              		@ sp needed
 544 01b2 BDEC048B 		vldm	sp!, {d8-d9}
 545              		.cfi_restore 82
 546              		.cfi_restore 83
 547              		.cfi_restore 80
 548              		.cfi_restore 81
 549              		.cfi_def_cfa_offset 20
 550              	.LVL54:
 551              		.loc 1 178 1 view .LVU148
 552 01b6 F0BD     		pop	{r4, r5, r6, r7, pc}
 553              	.LVL55:
 554              	.L31:
 555              		.cfi_restore_state
 556              	.LBB7:
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 14


 133:patchouli/src/patchouli.c **** 
 557              		.loc 1 133 14 is_stmt 1 discriminator 1 view .LVU149
 133:patchouli/src/patchouli.c **** 
 558              		.loc 1 133 21 is_stmt 0 discriminator 1 view .LVU150
 559 01b8 1348     		ldr	r0, .L32+52
 560              	.LVL56:
 133:patchouli/src/patchouli.c **** 
 561              		.loc 1 133 21 discriminator 1 view .LVU151
 562 01ba FFF7FEFF 		bl	patchouli_mva_buffer_push
 563              	.LVL57:
 133:patchouli/src/patchouli.c **** 
 564              		.loc 1 133 19 discriminator 1 view .LVU152
 565 01be 0C4B     		ldr	r3, .L32+28
 566 01c0 83ED000A 		vstr.32	s0, [r3]
 567 01c4 8FE7     		b	.L22
 568              	.LVL58:
 569              	.L21:
 133:patchouli/src/patchouli.c **** 
 570              		.loc 1 133 19 discriminator 1 view .LVU153
 571              	.LBE7:
 175:patchouli/src/patchouli.c **** 		patchouli_led_off();
 572              		.loc 1 175 9 is_stmt 1 view .LVU154
 175:patchouli/src/patchouli.c **** 		patchouli_led_off();
 573              		.loc 1 175 21 is_stmt 0 view .LVU155
 574 01c6 094B     		ldr	r3, .L32+24
 575 01c8 0022     		movs	r2, #0
 576 01ca 1A70     		strb	r2, [r3]
 176:patchouli/src/patchouli.c **** 	}
 577              		.loc 1 176 3 is_stmt 1 view .LVU156
 578 01cc FFF7FEFF 		bl	patchouli_led_off
 579              	.LVL59:
 580              		.loc 1 178 1 is_stmt 0 view .LVU157
 581 01d0 EEE7     		b	.L17
 582              	.L33:
 583 01d2 00BF     		.align	2
 584              	.L32:
 585 01d4 00000000 		.word	xpos
 586 01d8 00000000 		.word	maxpptr
 587 01dc 00000000 		.word	ypos
 588 01e0 00000000 		.word	psamples
 589 01e4 00000000 		.word	.LC0
 590 01e8 0000FA44 		.word	1157234688
 591 01ec 00000000 		.word	pen_present
 592 01f0 00000000 		.word	pavg
 593 01f4 00000000 		.word	pen_zero_pressure
 594 01f8 00000000 		.word	0
 595 01fc 0000FA46 		.word	1190789120
 596 0200 00409C46 		.word	1184645120
 597 0204 CD4C6BC4 		.word	-999600947
 598 0208 00000000 		.word	mva_p
 599              		.cfi_endproc
 600              	.LFE1110:
 602              		.section	.text._patchouli_cycle_xscan,"ax",%progbits
 603              		.align	1
 604              		.global	_patchouli_cycle_xscan
 605              		.syntax unified
 606              		.thumb
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 15


 607              		.thumb_func
 609              	_patchouli_cycle_xscan:
 610              	.LFB1111:
 179:patchouli/src/patchouli.c **** 
 180:patchouli/src/patchouli.c **** void _patchouli_cycle_xscan(){
 611              		.loc 1 180 30 is_stmt 1 view -0
 612              		.cfi_startproc
 613              		@ args = 0, pretend = 0, frame = 0
 614              		@ frame_needed = 0, uses_anonymous_args = 0
 615 0000 10B5     		push	{r4, lr}
 616              		.cfi_def_cfa_offset 8
 617              		.cfi_offset 4, -8
 618              		.cfi_offset 14, -4
 181:patchouli/src/patchouli.c ****     // Scan X Position
 182:patchouli/src/patchouli.c ****     for (int xstep=0;xstep<PATCHOULI_N_X_COIL;xstep++){
 619              		.loc 1 182 5 view .LVU159
 620              	.LBB8:
 621              		.loc 1 182 10 view .LVU160
 622              	.LVL60:
 623              		.loc 1 182 14 is_stmt 0 view .LVU161
 624 0002 0024     		movs	r4, #0
 625              		.loc 1 182 5 view .LVU162
 626 0004 08E0     		b	.L35
 627              	.LVL61:
 628              	.L36:
 183:patchouli/src/patchouli.c ****         patchouli_coil_select(xstep, true);
 629              		.loc 1 183 9 is_stmt 1 view .LVU163
 630 0006 0121     		movs	r1, #1
 631 0008 2046     		mov	r0, r4
 632 000a FFF7FEFF 		bl	patchouli_coil_select
 633              	.LVL62:
 184:patchouli/src/patchouli.c ****         patchouli_simple_take_sample(false, 0);
 634              		.loc 1 184 9 view .LVU164
 635 000e 0021     		movs	r1, #0
 636 0010 0846     		mov	r0, r1
 637 0012 FFF7FEFF 		bl	patchouli_simple_take_sample
 638              	.LVL63:
 182:patchouli/src/patchouli.c ****         patchouli_coil_select(xstep, true);
 639              		.loc 1 182 52 discriminator 3 view .LVU165
 640 0016 0134     		adds	r4, r4, #1
 641              	.LVL64:
 642              	.L35:
 182:patchouli/src/patchouli.c ****         patchouli_coil_select(xstep, true);
 643              		.loc 1 182 27 discriminator 1 view .LVU166
 644 0018 1B2C     		cmp	r4, #27
 645 001a F4D9     		bls	.L36
 646              	.LBE8:
 647              	.LBB9:
 185:patchouli/src/patchouli.c ****     }
 186:patchouli/src/patchouli.c ****     // Sleep for 1000 cycles
 187:patchouli/src/patchouli.c ****     for (int i=0;i<50000;i++){
 648              		.loc 1 187 14 is_stmt 0 view .LVU167
 649 001c 0023     		movs	r3, #0
 650 001e 01E0     		b	.L37
 651              	.LVL65:
 652              	.L38:
 188:patchouli/src/patchouli.c ****         // Do nothing, just wait
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 16


 189:patchouli/src/patchouli.c ****         __asm__ volatile ("nop");
 653              		.loc 1 189 9 is_stmt 1 view .LVU168
 654              		.syntax unified
 655              	@ 189 "patchouli/src/patchouli.c" 1
 656 0020 00BF     		nop
 657              	@ 0 "" 2
 187:patchouli/src/patchouli.c ****         // Do nothing, just wait
 658              		.loc 1 187 27 discriminator 3 view .LVU169
 659              		.thumb
 660              		.syntax unified
 661 0022 0133     		adds	r3, r3, #1
 662              	.LVL66:
 663              	.L37:
 187:patchouli/src/patchouli.c ****         // Do nothing, just wait
 664              		.loc 1 187 19 discriminator 1 view .LVU170
 665 0024 4CF24F32 		movw	r2, #49999
 666 0028 9342     		cmp	r3, r2
 667 002a F9DD     		ble	.L38
 668              	.LBE9:
 190:patchouli/src/patchouli.c ****     }
 191:patchouli/src/patchouli.c **** }
 669              		.loc 1 191 1 is_stmt 0 view .LVU171
 670 002c 10BD     		pop	{r4, pc}
 671              		.loc 1 191 1 view .LVU172
 672              		.cfi_endproc
 673              	.LFE1111:
 675              		.section	.text._patchouli_cycle_yscan,"ax",%progbits
 676              		.align	1
 677              		.global	_patchouli_cycle_yscan
 678              		.syntax unified
 679              		.thumb
 680              		.thumb_func
 682              	_patchouli_cycle_yscan:
 683              	.LFB1112:
 192:patchouli/src/patchouli.c **** 
 193:patchouli/src/patchouli.c **** void _patchouli_cycle_yscan(){
 684              		.loc 1 193 30 is_stmt 1 view -0
 685              		.cfi_startproc
 686              		@ args = 0, pretend = 0, frame = 0
 687              		@ frame_needed = 0, uses_anonymous_args = 0
 688 0000 10B5     		push	{r4, lr}
 689              		.cfi_def_cfa_offset 8
 690              		.cfi_offset 4, -8
 691              		.cfi_offset 14, -4
 194:patchouli/src/patchouli.c ****     // Scan Y Position
 195:patchouli/src/patchouli.c ****     for (int ystep=0;ystep<PATCHOULI_N_Y_COIL;ystep++){
 692              		.loc 1 195 5 view .LVU174
 693              	.LBB10:
 694              		.loc 1 195 10 view .LVU175
 695              	.LVL67:
 696              		.loc 1 195 14 is_stmt 0 view .LVU176
 697 0002 0024     		movs	r4, #0
 698              		.loc 1 195 5 view .LVU177
 699 0004 08E0     		b	.L41
 700              	.LVL68:
 701              	.L42:
 196:patchouli/src/patchouli.c ****         patchouli_coil_select(ystep, false);
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 17


 702              		.loc 1 196 9 is_stmt 1 view .LVU178
 703 0006 0021     		movs	r1, #0
 704 0008 2046     		mov	r0, r4
 705 000a FFF7FEFF 		bl	patchouli_coil_select
 706              	.LVL69:
 197:patchouli/src/patchouli.c ****         patchouli_simple_take_sample(true, 0);
 707              		.loc 1 197 9 view .LVU179
 708 000e 0021     		movs	r1, #0
 709 0010 0120     		movs	r0, #1
 710 0012 FFF7FEFF 		bl	patchouli_simple_take_sample
 711              	.LVL70:
 195:patchouli/src/patchouli.c ****         patchouli_coil_select(ystep, false);
 712              		.loc 1 195 52 discriminator 3 view .LVU180
 713 0016 0134     		adds	r4, r4, #1
 714              	.LVL71:
 715              	.L41:
 195:patchouli/src/patchouli.c ****         patchouli_coil_select(ystep, false);
 716              		.loc 1 195 27 discriminator 1 view .LVU181
 717 0018 112C     		cmp	r4, #17
 718 001a F4D9     		bls	.L42
 719              	.LBE10:
 720              	.LBB11:
 198:patchouli/src/patchouli.c ****     }
 199:patchouli/src/patchouli.c ****     // Sleep for 1000 cycles
 200:patchouli/src/patchouli.c ****     for (int i=0;i<50000;i++){
 721              		.loc 1 200 14 is_stmt 0 view .LVU182
 722 001c 0023     		movs	r3, #0
 723 001e 01E0     		b	.L43
 724              	.LVL72:
 725              	.L44:
 201:patchouli/src/patchouli.c ****         // Do nothing, just wait
 202:patchouli/src/patchouli.c ****         __asm__ volatile ("nop");
 726              		.loc 1 202 9 is_stmt 1 view .LVU183
 727              		.syntax unified
 728              	@ 202 "patchouli/src/patchouli.c" 1
 729 0020 00BF     		nop
 730              	@ 0 "" 2
 200:patchouli/src/patchouli.c ****         // Do nothing, just wait
 731              		.loc 1 200 27 discriminator 3 view .LVU184
 732              		.thumb
 733              		.syntax unified
 734 0022 0133     		adds	r3, r3, #1
 735              	.LVL73:
 736              	.L43:
 200:patchouli/src/patchouli.c ****         // Do nothing, just wait
 737              		.loc 1 200 19 discriminator 1 view .LVU185
 738 0024 4CF24F32 		movw	r2, #49999
 739 0028 9342     		cmp	r3, r2
 740 002a F9DD     		ble	.L44
 741              	.LBE11:
 203:patchouli/src/patchouli.c ****     }
 204:patchouli/src/patchouli.c **** }
 742              		.loc 1 204 1 is_stmt 0 view .LVU186
 743 002c 10BD     		pop	{r4, pc}
 744              		.loc 1 204 1 view .LVU187
 745              		.cfi_endproc
 746              	.LFE1112:
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 18


 748              		.section	.text.patchouli_set_mode,"ax",%progbits
 749              		.align	1
 750              		.global	patchouli_set_mode
 751              		.syntax unified
 752              		.thumb
 753              		.thumb_func
 755              	patchouli_set_mode:
 756              	.LVL74:
 757              	.LFB1113:
 205:patchouli/src/patchouli.c **** void patchouli_set_mode(patchouli_debug_t mode){
 758              		.loc 1 205 48 is_stmt 1 view -0
 759              		.cfi_startproc
 760              		@ args = 0, pretend = 0, frame = 0
 761              		@ frame_needed = 0, uses_anonymous_args = 0
 762              		@ link register save eliminated.
 206:patchouli/src/patchouli.c ****     // todo: reset all global variables when mode changes
 207:patchouli/src/patchouli.c ****     debug_state = mode;
 763              		.loc 1 207 5 view .LVU189
 764              		.loc 1 207 17 is_stmt 0 view .LVU190
 765 0000 014B     		ldr	r3, .L47
 766 0002 1870     		strb	r0, [r3]
 208:patchouli/src/patchouli.c **** }
 767              		.loc 1 208 1 view .LVU191
 768 0004 7047     		bx	lr
 769              	.L48:
 770 0006 00BF     		.align	2
 771              	.L47:
 772 0008 00000000 		.word	debug_state
 773              		.cfi_endproc
 774              	.LFE1113:
 776              		.section	.text.patchouli_cycle,"ax",%progbits
 777              		.align	1
 778              		.global	patchouli_cycle
 779              		.syntax unified
 780              		.thumb
 781              		.thumb_func
 783              	patchouli_cycle:
 784              	.LFB1114:
 209:patchouli/src/patchouli.c **** void patchouli_cycle(){
 785              		.loc 1 209 23 is_stmt 1 view -0
 786              		.cfi_startproc
 787              		@ args = 0, pretend = 0, frame = 0
 788              		@ frame_needed = 0, uses_anonymous_args = 0
 789 0000 08B5     		push	{r3, lr}
 790              		.cfi_def_cfa_offset 8
 791              		.cfi_offset 3, -8
 792              		.cfi_offset 14, -4
 210:patchouli/src/patchouli.c ****     // CDC_Transmit_FS((uint8_t*)"Cycle\n", 6);
 211:patchouli/src/patchouli.c ****     switch (debug_state) {
 793              		.loc 1 211 5 view .LVU193
 794 0002 084B     		ldr	r3, .L54
 795 0004 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 796 0006 012B     		cmp	r3, #1
 797 0008 05D0     		beq	.L50
 798 000a 022B     		cmp	r3, #2
 799 000c 06D0     		beq	.L51
 800 000e 0BB9     		cbnz	r3, .L49
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 19


 212:patchouli/src/patchouli.c ****         case PATCHOULI_DEBUG_NONE:
 213:patchouli/src/patchouli.c ****             _patchouli_cycle_default();
 801              		.loc 1 213 13 view .LVU194
 802 0010 FFF7FEFF 		bl	_patchouli_cycle_default
 803              	.LVL75:
 214:patchouli/src/patchouli.c ****             break;
 804              		.loc 1 214 13 view .LVU195
 805              	.L49:
 215:patchouli/src/patchouli.c ****         case PATCHOULI_DEBUG_XSCAN:
 216:patchouli/src/patchouli.c ****             _patchouli_cycle_xscan();
 217:patchouli/src/patchouli.c ****             break;
 218:patchouli/src/patchouli.c ****         case PATCHOULI_DEBUG_YSCAN:
 219:patchouli/src/patchouli.c ****             _patchouli_cycle_yscan();
 220:patchouli/src/patchouli.c ****             break;
 221:patchouli/src/patchouli.c ****         // case PATCHOULI_DEBUG_PEN_SCAN:
 222:patchouli/src/patchouli.c ****         //     _patchouli_scan_passive_pen_parameters();
 223:patchouli/src/patchouli.c ****             // break;
 224:patchouli/src/patchouli.c ****         default:
 225:patchouli/src/patchouli.c ****             // Undefined mode
 226:patchouli/src/patchouli.c ****             PATCHOULI_ErrLog("Undefined mode: %d", debug_state);
 227:patchouli/src/patchouli.c ****     }
 228:patchouli/src/patchouli.c **** }
 806              		.loc 1 228 1 is_stmt 0 view .LVU196
 807 0014 08BD     		pop	{r3, pc}
 808              	.L50:
 216:patchouli/src/patchouli.c ****             break;
 809              		.loc 1 216 13 is_stmt 1 view .LVU197
 810 0016 FFF7FEFF 		bl	_patchouli_cycle_xscan
 811              	.LVL76:
 217:patchouli/src/patchouli.c ****         case PATCHOULI_DEBUG_YSCAN:
 812              		.loc 1 217 13 view .LVU198
 813 001a FBE7     		b	.L49
 814              	.L51:
 219:patchouli/src/patchouli.c ****             break;
 815              		.loc 1 219 13 view .LVU199
 816 001c FFF7FEFF 		bl	_patchouli_cycle_yscan
 817              	.LVL77:
 220:patchouli/src/patchouli.c ****         // case PATCHOULI_DEBUG_PEN_SCAN:
 818              		.loc 1 220 13 view .LVU200
 226:patchouli/src/patchouli.c ****     }
 819              		.loc 1 226 64 view .LVU201
 820              		.loc 1 228 1 is_stmt 0 view .LVU202
 821 0020 F8E7     		b	.L49
 822              	.L55:
 823 0022 00BF     		.align	2
 824              	.L54:
 825 0024 00000000 		.word	debug_state
 826              		.cfi_endproc
 827              	.LFE1114:
 829              		.section	.rodata.patchouli_debug_output.str1.4,"aMS",%progbits,1
 830              		.align	2
 831              	.LC1:
 832 0000 257300   		.ascii	"%s\000"
 833 0003 00       		.align	2
 834              	.LC2:
 835 0004 0A00     		.ascii	"\012\000"
 836              		.section	.text.patchouli_debug_output,"ax",%progbits
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 20


 837              		.align	1
 838              		.global	patchouli_debug_output
 839              		.syntax unified
 840              		.thumb
 841              		.thumb_func
 843              	patchouli_debug_output:
 844              	.LVL78:
 845              	.LFB1115:
 229:patchouli/src/patchouli.c **** 
 230:patchouli/src/patchouli.c **** // Debug helper function implementation
 231:patchouli/src/patchouli.c **** void patchouli_debug_output(const char* prefix, const char* format, ...) {
 846              		.loc 1 231 74 is_stmt 1 view -0
 847              		.cfi_startproc
 848              		@ args = 4, pretend = 12, frame = 264
 849              		@ frame_needed = 0, uses_anonymous_args = 1
 850              		.loc 1 231 74 is_stmt 0 view .LVU204
 851 0000 0EB4     		push	{r1, r2, r3}
 852              		.cfi_def_cfa_offset 12
 853              		.cfi_offset 1, -12
 854              		.cfi_offset 2, -8
 855              		.cfi_offset 3, -4
 856 0002 30B5     		push	{r4, r5, lr}
 857              		.cfi_def_cfa_offset 24
 858              		.cfi_offset 4, -24
 859              		.cfi_offset 5, -20
 860              		.cfi_offset 14, -16
 861 0004 C2B0     		sub	sp, sp, #264
 862              		.cfi_def_cfa_offset 288
 863 0006 0346     		mov	r3, r0
 864 0008 45AA     		add	r2, sp, #276
 865 000a 52F8045B 		ldr	r5, [r2], #4
 232:patchouli/src/patchouli.c ****     char debug_buffer[256];
 866              		.loc 1 232 5 is_stmt 1 view .LVU205
 233:patchouli/src/patchouli.c ****     va_list args;
 867              		.loc 1 233 5 view .LVU206
 234:patchouli/src/patchouli.c ****     
 235:patchouli/src/patchouli.c ****     // Format the message
 236:patchouli/src/patchouli.c ****     va_start(args, format);
 868              		.loc 1 236 5 view .LVU207
 869 000e 0192     		str	r2, [sp, #4]
 237:patchouli/src/patchouli.c ****     int len = snprintf(debug_buffer, sizeof(debug_buffer), "%s", prefix);
 870              		.loc 1 237 5 view .LVU208
 871              		.loc 1 237 15 is_stmt 0 view .LVU209
 872 0010 104A     		ldr	r2, .L58
 873 0012 4FF48071 		mov	r1, #256
 874 0016 02A8     		add	r0, sp, #8
 875              	.LVL79:
 876              		.loc 1 237 15 view .LVU210
 877 0018 FFF7FEFF 		bl	snprintf
 878              	.LVL80:
 879              		.loc 1 237 15 view .LVU211
 880 001c 0446     		mov	r4, r0
 881              	.LVL81:
 238:patchouli/src/patchouli.c ****     len += vsnprintf(debug_buffer + len, sizeof(debug_buffer) - len, format, args);
 882              		.loc 1 238 5 is_stmt 1 view .LVU212
 883              		.loc 1 238 12 is_stmt 0 view .LVU213
 884 001e 019B     		ldr	r3, [sp, #4]
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 21


 885 0020 2A46     		mov	r2, r5
 886 0022 C0F58071 		rsb	r1, r0, #256
 887 0026 02A8     		add	r0, sp, #8
 888              	.LVL82:
 889              		.loc 1 238 12 view .LVU214
 890 0028 2044     		add	r0, r0, r4
 891 002a FFF7FEFF 		bl	vsnprintf
 892              	.LVL83:
 893              		.loc 1 238 9 discriminator 1 view .LVU215
 894 002e 0444     		add	r4, r4, r0
 895              	.LVL84:
 239:patchouli/src/patchouli.c ****     len += snprintf(debug_buffer + len, sizeof(debug_buffer) - len, "\n");
 896              		.loc 1 239 5 is_stmt 1 view .LVU216
 897              		.loc 1 239 12 is_stmt 0 view .LVU217
 898 0030 094A     		ldr	r2, .L58+4
 899 0032 C4F58071 		rsb	r1, r4, #256
 900 0036 02AB     		add	r3, sp, #8
 901 0038 1819     		adds	r0, r3, r4
 902 003a FFF7FEFF 		bl	snprintf
 903              	.LVL85:
 904              		.loc 1 239 9 discriminator 1 view .LVU218
 905 003e 2118     		adds	r1, r4, r0
 906              	.LVL86:
 240:patchouli/src/patchouli.c ****     va_end(args);
 907              		.loc 1 240 5 is_stmt 1 view .LVU219
 241:patchouli/src/patchouli.c ****     
 242:patchouli/src/patchouli.c ****     // Send via CDC
 243:patchouli/src/patchouli.c ****     CDC_Transmit_FS(debug_buffer, len);
 908              		.loc 1 243 5 view .LVU220
 909 0040 89B2     		uxth	r1, r1
 910              	.LVL87:
 911              		.loc 1 243 5 is_stmt 0 view .LVU221
 912 0042 02A8     		add	r0, sp, #8
 913              	.LVL88:
 914              		.loc 1 243 5 view .LVU222
 915 0044 FFF7FEFF 		bl	CDC_Transmit_FS
 916              	.LVL89:
 244:patchouli/src/patchouli.c **** }
 917              		.loc 1 244 1 view .LVU223
 918 0048 42B0     		add	sp, sp, #264
 919              		.cfi_def_cfa_offset 24
 920              		@ sp needed
 921 004a BDE83040 		pop	{r4, r5, lr}
 922              		.cfi_restore 14
 923              		.cfi_restore 5
 924              		.cfi_restore 4
 925              		.cfi_def_cfa_offset 12
 926              		.loc 1 244 1 view .LVU224
 927 004e 03B0     		add	sp, sp, #12
 928              		.cfi_restore 3
 929              		.cfi_restore 2
 930              		.cfi_restore 1
 931              		.cfi_def_cfa_offset 0
 932 0050 7047     		bx	lr
 933              	.L59:
 934 0052 00BF     		.align	2
 935              	.L58:
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 22


 936 0054 00000000 		.word	.LC1
 937 0058 04000000 		.word	.LC2
 938              		.cfi_endproc
 939              	.LFE1115:
 941              		.global	ypos
 942              		.section	.bss.ypos,"aw",%nobits
 943              		.align	2
 946              	ypos:
 947 0000 00000000 		.space	12
 947      00000000 
 947      00000000 
 948              		.global	xpos
 949              		.section	.bss.xpos,"aw",%nobits
 950              		.align	2
 953              	xpos:
 954 0000 00000000 		.space	12
 954      00000000 
 954      00000000 
 955              		.global	pen_zero_pressure
 956              		.section	.bss.pen_zero_pressure,"aw",%nobits
 957              		.align	2
 960              	pen_zero_pressure:
 961 0000 00000000 		.space	4
 962              		.global	pen_present
 963              		.section	.bss.pen_present,"aw",%nobits
 966              	pen_present:
 967 0000 00       		.space	1
 968              		.global	psamples
 969              		.section	.bss.psamples,"aw",%nobits
 970              		.align	2
 973              	psamples:
 974 0000 00000000 		.space	18
 974      00000000 
 974      00000000 
 974      00000000 
 974      0000
 975              		.global	maxpptr
 976              		.section	.data.maxpptr,"aw"
 977              		.align	2
 980              	maxpptr:
 981 0000 07000000 		.word	7
 982              		.global	pavg
 983              		.section	.bss.pavg,"aw",%nobits
 984              		.align	2
 987              	pavg:
 988 0000 00000000 		.space	4
 989              		.global	debug_state
 990              		.section	.bss.debug_state,"aw",%nobits
 993              	debug_state:
 994 0000 00       		.space	1
 995              		.global	mva_p
 996              		.section	.bss.mva_p,"aw",%nobits
 997              		.align	2
 1000              	mva_p:
 1001 0000 00000000 		.space	20
 1001      00000000 
 1001      00000000 
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 23


 1001      00000000 
 1001      00000000 
 1002              		.global	mva_ypos
 1003              		.section	.bss.mva_ypos,"aw",%nobits
 1004              		.align	2
 1007              	mva_ypos:
 1008 0000 00000000 		.space	20
 1008      00000000 
 1008      00000000 
 1008      00000000 
 1008      00000000 
 1009              		.global	mva_xpos
 1010              		.section	.bss.mva_xpos,"aw",%nobits
 1011              		.align	2
 1014              	mva_xpos:
 1015 0000 00000000 		.space	20
 1015      00000000 
 1015      00000000 
 1015      00000000 
 1015      00000000 
 1016              		.text
 1017              	.Letext0:
 1018              		.file 2 "C:/PROGRAM FILES (X86)/ARM GNU TOOLCHAIN ARM-NONE-EABI/13.3 REL1/arm-none-eabi/include/ma
 1019              		.file 3 "C:/PROGRAM FILES (X86)/ARM GNU TOOLCHAIN ARM-NONE-EABI/13.3 REL1/arm-none-eabi/include/sy
 1020              		.file 4 "C:/PROGRAM FILES (X86)/ARM GNU TOOLCHAIN ARM-NONE-EABI/13.3 REL1/lib/gcc/arm-none-eabi/13
 1021              		.file 5 "C:/PROGRAM FILES (X86)/ARM GNU TOOLCHAIN ARM-NONE-EABI/13.3 REL1/lib/gcc/arm-none-eabi/13
 1022              		.file 6 "C:/PROGRAM FILES (X86)/ARM GNU TOOLCHAIN ARM-NONE-EABI/13.3 REL1/arm-none-eabi/include/st
 1023              		.file 7 "patchouli/inc/patchouli.h"
 1024              		.file 8 "patchouli/inc/patchouli_math.h"
 1025              		.file 9 "patchouli/inc/patchouli_bsp_glider_addon_v1.h"
 1026              		.file 10 "C:/PROGRAM FILES (X86)/ARM GNU TOOLCHAIN ARM-NONE-EABI/13.3 REL1/arm-none-eabi/include/m
 1027              		.file 11 "USB_Device/App/usbd_cdc_if.h"
 1028              		.file 12 "<built-in>"
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 24


DEFINED SYMBOLS
                            *ABS*:00000000 patchouli.c
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:21     .text.patchouli_get_position:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:27     .text.patchouli_get_position:00000000 patchouli_get_position
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:182    .text.patchouli_get_position:000000ac $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:187    .text.patchouli_init:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:193    .text.patchouli_init:00000000 patchouli_init
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:224    .text.patchouli_init:0000001c $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:1000   .bss.mva_p:00000000 mva_p
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:229    .rodata._patchouli_cycle_default.str1.4:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:236    .text._patchouli_cycle_default:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:242    .text._patchouli_cycle_default:00000000 _patchouli_cycle_default
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:585    .text._patchouli_cycle_default:000001d4 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:953    .bss.xpos:00000000 xpos
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:980    .data.maxpptr:00000000 maxpptr
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:946    .bss.ypos:00000000 ypos
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:973    .bss.psamples:00000000 psamples
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:966    .bss.pen_present:00000000 pen_present
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:987    .bss.pavg:00000000 pavg
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:960    .bss.pen_zero_pressure:00000000 pen_zero_pressure
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:603    .text._patchouli_cycle_xscan:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:609    .text._patchouli_cycle_xscan:00000000 _patchouli_cycle_xscan
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:676    .text._patchouli_cycle_yscan:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:682    .text._patchouli_cycle_yscan:00000000 _patchouli_cycle_yscan
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:749    .text.patchouli_set_mode:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:755    .text.patchouli_set_mode:00000000 patchouli_set_mode
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:772    .text.patchouli_set_mode:00000008 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:993    .bss.debug_state:00000000 debug_state
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:777    .text.patchouli_cycle:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:783    .text.patchouli_cycle:00000000 patchouli_cycle
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:825    .text.patchouli_cycle:00000024 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:830    .rodata.patchouli_debug_output.str1.4:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:837    .text.patchouli_debug_output:00000000 $t
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:843    .text.patchouli_debug_output:00000000 patchouli_debug_output
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:936    .text.patchouli_debug_output:00000054 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:943    .bss.ypos:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:950    .bss.xpos:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:957    .bss.pen_zero_pressure:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:967    .bss.pen_present:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:970    .bss.psamples:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:977    .data.maxpptr:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:984    .bss.pavg:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:994    .bss.debug_state:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:997    .bss.mva_p:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:1007   .bss.mva_ypos:00000000 mva_ypos
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:1004   .bss.mva_ypos:00000000 $d
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:1014   .bss.mva_xpos:00000000 mva_xpos
C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s:1011   .bss.mva_xpos:00000000 $d

UNDEFINED SYMBOLS
patchouli_coil_select
patchouli_simple_take_sample
memset
patchouli_quad_interp
patchouli_TIM_init
patchouli_gauss_init_kernel
patchouli_mva_buffer_init
ARM GAS  C:\Users\Nathan\AppData\Local\Temp\cciYjCdv.s 			page 25


__aeabi_f2d
__aeabi_d2f
__aeabi_d2iz
patchouli_led_on
CDC_Transmit_FS
patchouli_gauss_apply
exp
patchouli_linear_map
round
patchouli_transmit
patchouli_mva_buffer_push
patchouli_led_off
snprintf
vsnprintf
